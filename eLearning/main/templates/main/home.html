{% extends "main/base.html" %}

{% block title %}
Home
{% endblock %}

{% block styles %}
{% load static %}
<link rel="stylesheet" href="{% static 'main/css/home.css' %}" />
{% endblock %}

{% block content %}
{% if not user.is_authenticated %}
<div class="container">
    <div class="img-banner">
        <img class="img-fluid" src="{% static 'main/image/img-banner.jpg' %}" alt="img_banner" />
        <div class="darker-img"></div>
    </div>
    <div class="centered">
        <h1 class="text-white">Your Course to success</h1>
        <p class="text-white">Improve your skills with eLearning</p>
        <p class="lead">
            <a class="btn btn-primary btn-lg" href="{% url 'registration'  %}" role="button">Join</a>
        </p>
    </div>
</div>
{% else %}
<div class="container">
    <div class="home-grid">
        {% for courses in courses_set%}
        <div class="courses-block">
            <div class="courses-name">
                {{ courses.name }}
            </div>
            <div class="course-block">
            {% for course in courses.courses %}
                <div class="course-item">
                    <a href="{% url 'course_detail' course_pk=course.pk %}">
                        <img class="course-cover" src="{{ course.cover.url }}">
                    </a>
                    <a class="course-name" href="{% url 'course_detail' course_pk=course.pk %}">
                        {{ course.name }}
                    </a>
                </div>
            {% empty %}
                <div class="no-courses">
                    {% if "current" in courses.name|lower %}
                    You haven't started learning.
                    {% elif "users" in courses.name|lower %}
                    There are no courses created by users.
                    {% elif "starred" in courses.name|lower %}
                    You haven't starred any course.
                    {% elif "completed" in courses.name|lower %}
                    You haven't completed any course.
                    {% elif "recommended" in courses.name|lower %}
                    There are no reated courses.
                    {% endif %}
                </div>
            {% endfor %}
            </div>
        </div>
        {% endfor %}
    </div>
</div>
{% endif %}
{% endblock %}

{% block js_scripts %}
<script>
$(document).ready(function() {
    document.querySelectorAll("div.course-block").forEach(function(parent) {
        parent.childNodes.forEach(function(child) {
            if (child.className === "no-courses") {
                parent.classList.remove("course-block");
            }
        })
    })
});
</script>
{% endblock %}