{% extends "main/base.html" %}

{% block title %}
{{ courses_type|title }} courses
{% endblock %}

{% block styles %}
<link rel="stylesheet" type="text/css"
      href="https://cdn.datatables.net/v/dt/dt-1.10.20/cr-1.5.2/rr-1.2.6/sc-2.0.1/sp-1.0.1/sl-1.3.1/datatables.min.css"/>
{% load static %}
<link rel="stylesheet" href="{% static 'main/css/category_courses.css' %}" />
<link rel="stylesheet" href="{% static 'main/css/base.css' %}" />
{% endblock %}

{% block content %}
{% load main_extras %}
<div class="container background">
    <h3>{{ courses_type|title }} courses</h3>
    <table id="courseTableId" class="cell-border stripe hover table">
        <thead>
            <tr>
            <th scope="col">â„–</th>
            <th scope="col">Course</th>
            <th scope="col">Rating</th>
            {% if courses_type|lower == 'completed' %}
            <th scope="col">Result</th>
            {% endif %}
            <th scope="col">Action</th>
            </tr>
        </thead>
        <tbody>
            {% for course in courses %}
            <tr>
                <td>{{ forloop.counter }}</td>
                <td>{{ course.name }}</td>
                <td>{{ course.rating|default:"course wasn't rated" }}</td>
                {% if courses_type|lower == 'completed' %}
                    {% if grades|get_list_item:forloop.counter0 >= course.min_pass_grade %}
                    <td><i class="fas fa-check done"></i></td>
                    {% else %}
                    <td><i class="fas fa-times not-done"></i></td>
                    {% endif %}
                {% endif %}
                <td><a href="{% url 'course_detail' course_pk=course.pk %}"><i class="fas fa-info"></i></a></td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}

{% block js_scripts %}
<script src="https://kit.fontawesome.com/e278b3cacc.js" crossorigin="anonymous"></script>
<script type="text/javascript"
        src="https://cdn.datatables.net/v/dt/dt-1.10.20/cr-1.5.2/rr-1.2.6/sc-2.0.1/sp-1.0.1/sl-1.3.1/datatables.min.js">
</script>
<script>
$(document).ready(function(){
  $("#courseTableId").DataTable();
  addClassByName('courseTableId_length', ' table-select mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect');

  function addClassByName(name, class_) {
        var elements = document.getElementsByName(name);
        elements.forEach(function (item, index) {
            item.className += class_;
        });
    }
});
</script>
{% endblock %}