{% extends 'main/base.html' %}

{% block title %}
Organization list
{% endblock %}

{% block styles %}
{% load static %}
<link rel="stylesheet" href="{% static 'courses/datatables/heavy/datatables.min.css' %}" />
<link rel="stylesheet" href="{% static 'courses/css/base.css' %}" />
<link rel="stylesheet" href="{% static 'courses/css/course_list.css' %}" />
{% endblock %}

{% block content %}
<div class="container background">
  <a href="{% url 'organization_create' %}">
      <button class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect add-button button">add organization</button>
  </a>
  <div class="table-wrapper">
    <table id="organizationTableId" class="cell-border stripe hover table">
      <thead>
        <tr>
          <th scope="col">â„–</th>
          <th scope="col">Organization</th>
          <th scope="col">Approved</th>
          <th scope="col">Edit</th>
          <th scope="col">Sign in</th>
          <th scope="col">Sign out</th>
        </tr>
      </thead>
      <tbody>
        {% for organization in organization_list %}
        <tr>
            <td>{{ forloop.counter }}</td>
            <td>{{ organization.name }}</td>
            <td>{{ organization.is_visible }}</td>
            <td>
              <a href="{% url 'organization_edit' organization_pk=organization.pk %}"><i class="far fa-edit" title="edit"></i></a>
            </td>
            <td>
                <form id="sign_as_form" method="post" enctype="multipart/form-data"
                    action="{% url 'organization_sign_as' organization_pk=organization.pk %}">
                    {% csrf_token %}
                    <button type="submit" class="link-button"><i class="fas fa-sign-in-alt" title="sign in"></i></button>
                </form>
            </td>
            <td>
                <form id="unsign_as_form" method="post" enctype="multipart/form-data"
                    action="{% url 'organization_unsign_as' organization_pk=organization.pk %}">
                    {% csrf_token %}
                    <button type="submit" class="link-button"><i class="fas fa-sign-out-alt" title="sign out"></i></button>
                </form>
            </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endblock %}

{% block js_scripts %}
<script src="https://kit.fontawesome.com/e278b3cacc.js" crossorigin="anonymous"></script>
<script type="text/javascript"
        src="{% static 'courses/datatables/heavy/datatables.min.js' %}">
</script>

<script>
$(document).ready(function(){
  $("#organizationTableId").DataTable();
  addClassByName('organizationTableId_length', ' table-select mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect button');

  function addClassByName(name, class_) {
        var elements = document.getElementsByName(name);
        elements.forEach(function (item, index) {
            item.className += class_;
        });
    }
});
</script>
{% endblock %}

